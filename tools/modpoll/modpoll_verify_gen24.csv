device,gen24,1,,,

##############################################
# Battery / Storage (authoritative)
##############################################

# Battery SoC (0.01%)
poll,holding_register,40351,1,BE_BE,
ref,battery_soc_raw,40351,uint16,r,,

# Battery minimum SoC (0.01%)
poll,holding_register,40350,1,BE_BE,
ref,battery_soc_min_raw,40350,uint16,r,,

# DC power scale factor (shared)
poll,holding_register,40257,1,BE_BE,
ref,dc_power_sf,40257,int16,r,,

# Storage module 3 DC power (raw)
poll,holding_register,40314,1,BE_BE,
ref,storage_module3_dcw_raw,40314,uint16,r,,

# Storage module 4 DC power (raw)
poll,holding_register,40334,1,BE_BE,
ref,storage_module4_dcw_raw,40334,uint16,r,,

##############################################
# Grid / Smart Meter (slave 200)
##############################################

# Total grid power (raw)
poll,holding_register,40087,1,BE_BE,
ref,sm_power_raw,40087,int16,r,,

# Grid power scale factor
poll,holding_register,40091,1,BE_BE,
ref,sm_power_sf,40091,int16,r,,

# Phase currents L1/L2/L3
poll,holding_register,40072,1,BE_BE,
ref,sm_current_l1_raw,40072,int16,r,,

poll,holding_register,40073,1,BE_BE,
ref,sm_current_l2_raw,40073,int16,r,,

poll,holding_register,40074,1,BE_BE,
ref,sm_current_l3_raw,40074,int16,r,,

# Phase current scale factor
poll,holding_register,40075,1,BE_BE,
ref,sm_current_sf,40075,int16,r,,

# Imported energy (total)
poll,holding_register,40115,2,BE_BE,
ref,sm_import_energy_raw,40115,uint32,r,,

# Imported energy scale factor
poll,holding_register,40123,1,BE_BE,
ref,sm_import_energy_sf,40123,int16,r,,

##############################################
# PV / Inverter
##############################################

# PV power
poll,input_register,30201,1,BE_BE,
ref,inv_pv_power_raw,30201,int16,r,,

poll,input_register,30247,1,BE_BE,
ref,inv_pv_power_sf,30247,int16,r,,

# AC lifetime energy
poll,holding_register,40188,2,BE_BE,
ref,inv_ac_energy_lifetime_raw,40188,uint32,r,,

##############################################
# Control registers (write-capable, observe only)
##############################################

poll,holding_register,40348,1,BE_BE,
ref,battery_control_mode,40348,uint16,r,,

poll,holding_register,40355,1,BE_BE,
ref,battery_power_limit,40355,uint16,r,,

poll,holding_register,40356,1,BE_BE,
ref,battery_max_discharge,40356,uint16,r,,

poll,holding_register,40361,1,BE_BE,
ref,battery_enable_mode,40361,uint16,r,,
